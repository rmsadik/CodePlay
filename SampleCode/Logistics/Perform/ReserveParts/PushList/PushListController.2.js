var js=new Class.create;js.prototype={callbackIds:{},availStore:null,currentStore:null,initialize:function(e,t){this.callbackIds.initPushList=e;this.callbackIds.savePushList=t},initPushList:function(){var e={};bsuiteJs.postAjax(this.callbackIds.initPushList,{},{onLoading:function(){mb.showLoading("loading")},onComplete:function(t,n){try{e.result=bsuiteJs.getResp(n,false,true)}catch(r){alert(r);mb.hide();return}if(e.result.push===undefined||e.result.push===null){alert("System Error: information missing!");mb.hide();return}Ext.define("WarehouseRelationship",{extend:"Ext.data.Model",fields:["id","email","bread"]});pageJs.availStore={model:"WarehouseRelationship",data:e.result.push.availPushList,sorters:["bread"]};pageJs.currentStore={model:"WarehouseRelationship",data:e.result.push.currPushList,sorters:["bread"]};Ext.onReady(function(){Ext.widget({title:e.result.push.fromWhBread,xtype:"panel",layout:"border",items:[{title:"Available Options (alias 'Bytecraft Warehouse Type' = 'FR_PushList')",xtype:"grid",region:"center",margin:"5 0 5 5",hideHeaders:false,selModel:{mode:"MULTI"},viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:"list",dropGroup:"order"}},store:pageJs.availStore,columns:[{header:"",dataIndex:"bread",flex:1}]},{title:"Selected Options (Current Push List)",xtype:"grid",region:"east",margin:"5 5 5 0",split:true,hideHeaders:false,selModel:{mode:"MULTI"},viewConfig:{plugins:{ptype:"gridviewdragdrop",dragGroup:"order",dropGroup:"list"}},store:pageJs.currentStore,columns:[{header:"Email?",dataIndex:"email",width:40},{header:"",dataIndex:"bread",flex:1}],width:474}],width:948,height:800,renderTo:"pushListDiv"})});$("pushListDiv").addClassName("row");$("saveBtn").show();mb.hide()}})},savePushList:function(){var e={};e.whRel=[];e.chks=$$(".chk");for(var t=0;t<e.chks.length;t++){e.whRel.push({id:e.chks[t].value,email:e.chks[t].checked})}bsuiteJs.postAjax(this.callbackIds.savePushList,{params:Object.toJSON({whRel:e.whRel})},{onLoading:function(){mb.showLoading("saving")},onComplete:function(t,n){try{e.result=bsuiteJs.getResp(n,false,true)}catch(r){alert(r);mb.hide();return}alert("Push List successfully saved...");mb.hide()}})},resetPage:function(){if(confirm("Are you sure you want to reload the page, all data will be lost?")){location.reload()}}}